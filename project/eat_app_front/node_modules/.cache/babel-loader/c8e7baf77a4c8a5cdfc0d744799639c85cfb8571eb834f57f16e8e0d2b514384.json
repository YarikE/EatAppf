{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, createElementVNode as _createElementVNode, withDirectives as _withDirectives, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"select_user\"\n};\nconst _hoisted_2 = [\"value\"];\nconst _hoisted_3 = {\n  class: \"posts\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Заказы:\", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_NavBar = _resolveComponent(\"NavBar\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_NavBar), _createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.selectedUser = $event)\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.users, user => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      value: user.user_name\n    }, _toDisplayString(user.user_name), 9 /* TEXT, PROPS */, _hoisted_2);\n  }), 256 /* UNKEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.selectedUser]]), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = $event => $options.getHistory($data.selectedUser))\n  }, \"Выбрать сотрудника\")]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", null, [_hoisted_4, _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.orders, (order, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index\n    }, [_createElementVNode(\"div\", null, \"Дата заказа: \" + _toDisplayString(order.order_date), 1 /* TEXT */), _createElementVNode(\"div\", null, [_createTextVNode(\" Блюда: \"), _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(order.dishes, (dish, dishIndex) => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: dishIndex\n      }, _toDisplayString(dish.dish_name) + \" (\" + _toDisplayString(dish.dish_count) + \" шт.) - \" + _toDisplayString(dish.dish_now_price) + \" руб. \", 1 /* TEXT */);\n    }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", null, \"Стоимость заказа: \" + _toDisplayString(_ctx.order_price) + \" руб.\", 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\"                <div>Общая стоимость заказов: {{ full_orders_price }} руб.</div>\")])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","_createVNode","_component_NavBar","_hoisted_1","$data","selectedUser","$event","_createElementBlock","_Fragment","_renderList","users","user","value","user_name","_hoisted_2","onClick","_cache","$options","getHistory","_hoisted_3","_hoisted_4","orders","order","index","key","_toDisplayString","order_date","dishes","dish","dishIndex","dish_name","dish_count","dish_now_price","_ctx","order_price","_createCommentVNode"],"sources":["C:\\projects\\приложение для заказа корпоративной еды\\project\\eat_app_front\\src\\pages\\History.vue"],"sourcesContent":["<template>\r\n    <NavBar/>\r\n    <div>\r\n        <div class=\"select_user\">\r\n            <select v-model=\"selectedUser\">\r\n                <option v-for=\"user in users\" v-bind:value=\"user.user_name\">{{user.user_name}}</option>\r\n            </select>\r\n            <button @click=\"getHistory(selectedUser)\">Выбрать сотрудника</button>\r\n        </div>\r\n\r\n        <div class=\"posts\">\r\n            <div>\r\n                <h2>Заказы:</h2>\r\n                <ul>\r\n                    <li v-for=\"(order, index) in orders\" :key=\"index\">\r\n                        <div>Дата заказа: {{ order.order_date }}</div>\r\n                        <div>\r\n                            Блюда:\r\n                            <ul>\r\n                                <li v-for=\"(dish, dishIndex) in order.dishes\" :key=\"dishIndex\">\r\n                                    {{ dish.dish_name }} ({{ dish.dish_count }} шт.) - {{ dish.dish_now_price }} руб.\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                        <div>Стоимость заказа: {{ order_price }} руб.</div>\r\n                    </li>\r\n                </ul>\r\n<!--                <div>Общая стоимость заказов: {{ full_orders_price }} руб.</div>-->\r\n            </div>\r\n            </div>\r\n        </div>\r\n</template>\r\n\r\n<script>\r\nimport NavBar from \"@/Components/NavBar.vue\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n    components: {NavBar},\r\n    data(){\r\n        return{\r\n            selectedUser: null,\r\n            users: [],\r\n            orders: null,\r\n        }\r\n    },\r\n    mounted() {\r\n        axios.get('http://127.0.0.1:8000/api/user_view/')\r\n            .then(response => {\r\n                this.users = response.data\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    },\r\n    methods: {\r\n        getHistory(user) {\r\n            axios.post('http://127.0.0.1:8000/api/history/', {user_name: user})\r\n                .then(response =>{\r\n                    console.log(response.data)\r\n                    this.orders = response.data\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                })\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>"],"mappings":";;EAGaA,KAAK,EAAC;AAAa;;;EAOnBA,KAAK,EAAC;AAAO;gCAEVC,mBAAA,CAAgB,YAAZ,SAAO;;;;6DAXvBC,YAAA,CAASC,iBAAA,GACTF,mBAAA,CA4BU,cA3BNA,mBAAA,CAKM,OALNG,UAKM,G,gBAJFH,mBAAA,CAES;+DAFQI,KAAA,CAAAC,YAAY,GAAAC,MAAA;yBACzBC,mBAAA,CAAuFC,SAAA,QAAAC,WAAA,CAAhEL,KAAA,CAAAM,KAAK,EAAbC,IAAI;yBAAnBJ,mBAAA,CAAuF;MAAlDK,KAAK,EAAED,IAAI,CAACE;wBAAaF,IAAI,CAACE,SAAS,wBAAAC,UAAA;6EAD/DV,KAAA,CAAAC,YAAY,E,GAG7BL,mBAAA,CAAqE;IAA5De,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAV,MAAA,IAAEW,QAAA,CAAAC,UAAU,CAACd,KAAA,CAAAC,YAAY;KAAG,oBAAkB,E,GAGhEL,mBAAA,CAmBU,OAnBVmB,UAmBU,GAlBNnB,mBAAA,CAiBM,cAhBFoB,UAAgB,EAChBpB,mBAAA,CAaK,c,kBAZDO,mBAAA,CAWKC,SAAA,QAAAC,WAAA,CAXwBL,KAAA,CAAAiB,MAAM,GAAvBC,KAAK,EAAEC,KAAK;yBAAxBhB,mBAAA,CAWK;MAXiCiB,GAAG,EAAED;IAAK,IAC5CvB,mBAAA,CAA8C,aAAzC,eAAa,GAAAyB,gBAAA,CAAGH,KAAK,CAACI,UAAU,kBACrC1B,mBAAA,CAOM,c,iBAPD,UAED,GAAAA,mBAAA,CAIK,c,kBAHDO,mBAAA,CAEKC,SAAA,QAAAC,WAAA,CAF2Ba,KAAK,CAACK,MAAM,GAAhCC,IAAI,EAAEC,SAAS;2BAA3BtB,mBAAA,CAEK;QAF0CiB,GAAG,EAAEK;MAAS,GAAAJ,gBAAA,CACtDG,IAAI,CAACE,SAAS,IAAG,IAAE,GAAAL,gBAAA,CAAGG,IAAI,CAACG,UAAU,IAAG,UAAQ,GAAAN,gBAAA,CAAGG,IAAI,CAACI,cAAc,IAAG,QAChF;wCAGRhC,mBAAA,CAAmD,aAA9C,oBAAkB,GAAAyB,gBAAA,CAAGQ,IAAA,CAAAC,WAAW,IAAG,OAAK,gB;oCAGrEC,mBAAA,oFAAuF,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}